{
	"version": "1.48.0",
	"description": "a vpn software",
	"homepage": "https://tailscale.com/",
	"url": "https://pkgs.tailscale.com/stable/tailscale-setup-1.48.0.exe#/dl.exe",
	"hash": "e230e3a19a369dba321b051c821ed1d99b3a6c1ffbc5e975f5ba2d06441a7f40",
	"architecture": {
		"64bit": {
			"installer": {
				"script": [
					"dark -x $dir $dir\\dl.exe",
					"mv $dir\\AttachedContainer\\tailscale-setup-1.48.0-amd64.msi $dir\\installer.exe",
					"lessmsi x $dir\\installer.exe $dir\\",
					"mv $dir\\SourceDir\\Tailscale\\* $dir",
					"rm -Recurse -Force $dir\\AttachedContainer",
					"rm -Recurse -Force $dir\\SourceDir",
					"rm -Recurse -Force $dir\\UX",
					"rm -Force $dir\\dl.exe",
					"rm -Force $dir\\installer.exe",
					"$WshShell = New-Object -comObject WScript.Shell",
					"$startup = [System.Environment]::GetFolderPath('Startup')",
					"$Shortcut = $WshShell.CreateShortcut(\"$startup\\Tailscale.lnk\")",
					"$Shortcut.TargetPath = \"$dir\\Tailscale-ipn.exe\"",
					"$Shortcut.Save()",
					"if (Test-Path \"$persist_dir\\Tailscale\") {",
					"    Remove-Item \"$env:PROGRAMDATA\\Tailscale\" -Force -Recurse -ErrorAction SilentlyContinue",
					"    New-Item -Type Junction -Path \"$env:PROGRAMDATA\\Tailscale\" -Target \"$persist_dir\\Tailscale\" | Out-Null",
					"} else {",
					"    if (Test-Path \"$env:PROGRAMDATA\\Tailscale\") {",
					"        Start-Process powershell \"Move-Item $env:PROGRAMDATA\\Tailscale $persist_dir\\Tailscale -Force\" -Verb RunAs -WindowStyle hidden -wait",
					"        New-Item -Type Junction -Path \"$env:PROGRAMDATA\\Tailscale\" -Target \"$persist_dir\\Tailscale\" | Out-Null",
					"    }",
					"}",
					"if (Test-Path \"$persist_dir\\Tailscale-local\") {",
					"    Remove-Item \"$env:LOCALAPPDATA\\Tailscale\" -Force -Recurse -ErrorAction SilentlyContinue",
					"    New-Item -Type Junction -Path \"$env:LOCALAPPDATA\\Tailscale\" -Target \"$persist_dir\\Tailscale-local\" | Out-Null",
					"} else {",
					"    if (Test-Path \"$env:LOCALAPPDATA\\Tailscale\") {",
					"        Move-Item \"$env:LOCALAPPDATA\\Tailscale\" \"$persist_dir\\Tailscale-local\" -Force",
					"        New-Item -Type Junction -Path \"$env:LOCALAPPDATA\\Tailscale\" -Target \"$persist_dir\\Tailscale-local\" | Out-Null",
					"    }",
					"}",
					"Start-Process cmd -Args '/c', \"sc create Tailscale binpath=$dir\\tailscaled.exe DisplayName=Tailscale start=auto & sc start Tailscale\" -Verb RunAs -WindowStyle hidden"
				]
			}
		},
		"32bit": {
			"installer": {
				"script": [
					"dark -x $dir $dir\\dl.exe",
					"mv $dir\\AttachedContainer\\tailscale-setup-1.48.0-x86.msi $dir\\installer.exe",
					"lessmsi x $dir\\installer.exe $dir\\",
					"mv $dir\\SourceDir\\Tailscale\\* $dir",
					"rm -Recurse -Force $dir\\AttachedContainer",
					"rm -Recurse -Force $dir\\SourceDir",
					"rm -Recurse -Force $dir\\UX",
					"rm -Force $dir\\dl.exe",
					"rm -Force $dir\\installer.exe",
					"$WshShell = New-Object -comObject WScript.Shell",
					"$startup = [System.Environment]::GetFolderPath('Startup')",
					"$Shortcut = $WshShell.CreateShortcut(\"$startup\\Tailscale.lnk\")",
					"$Shortcut.TargetPath = \"$dir\\Tailscale-ipn.exe\"",
					"$Shortcut.Save()",
					"if (Test-Path \"$persist_dir\\Tailscale\") {",
					"    Remove-Item \"$env:PROGRAMDATA\\Tailscale\" -Force -Recurse -ErrorAction SilentlyContinue",
					"    New-Item -Type Junction -Path \"$env:PROGRAMDATA\\Tailscale\" -Target \"$persist_dir\\Tailscale\" | Out-Null",
					"} else {",
					"    if (Test-Path \"$env:PROGRAMDATA\\Tailscale\") {",
					"        Start-Process powershell \"Move-Item $env:PROGRAMDATA\\Tailscale $persist_dir\\Tailscale -Force\" -Verb RunAs -WindowStyle hidden -wait",
					"        New-Item -Type Junction -Path \"$env:PROGRAMDATA\\Tailscale\" -Target \"$persist_dir\\Tailscale\" | Out-Null",
					"    }",
					"}",
					"if (Test-Path \"$persist_dir\\Tailscale-local\") {",
					"    Remove-Item \"$env:LOCALAPPDATA\\Tailscale\" -Force -Recurse -ErrorAction SilentlyContinue",
					"    New-Item -Type Junction -Path \"$env:LOCALAPPDATA\\Tailscale\" -Target \"$persist_dir\\Tailscale-local\" | Out-Null",
					"} else {",
					"    if (Test-Path \"$env:LOCALAPPDATA\\Tailscale\") {",
					"        Move-Item \"$env:LOCALAPPDATA\\Tailscale\" \"$persist_dir\\Tailscale-local\" -Force",
					"        New-Item -Type Junction -Path \"$env:LOCALAPPDATA\\Tailscale\" -Target \"$persist_dir\\Tailscale-local\" | Out-Null",
					"    }",
					"}",
					"Start-Process cmd -Args '/c', \"sc create Tailscale binpath=$dir\\tailscaled.exe DisplayName=Tailscale start=auto & sc start Tailscale\" -Verb RunAs -WindowStyle hidden"
				]
			}
		}
	},
	"uninstaller": {
		"script": [
			"$startup = [System.Environment]::GetFolderPath('Startup')",
			"rm $startup\\Tailscale.lnk",
			"if (!(Test-Path \"$persist_dir\\Tailscale\")) {",
			"    Start-Process powershell \"sc.exe stop Tailscale;sc.exe delete Tailscale;Start-Sleep 1\" -Verb RunAs -WindowStyle hidden -wait",
			"    Move-Item \"$env:PROGRAMDATA\\Tailscale\" \"$persist_dir\\Tailscale\" -Force",
			"} else {",
			"    Start-Process powershell \"sc.exe stop Tailscale;sc.exe delete Tailscale;Remove-Item $env:PROGRAMDATA\\Tailscale -Force -Recurse -ErrorAction SilentlyContinue;Start-Sleep 1\" -Verb RunAs -WindowStyle hidden -wait",
			"}",
			"if (!(Test-Path \"$persist_dir\\Tailscale-local\")) {",
			"    Move-Item \"$env:LOCALAPPDATA\\Tailscale\" \"$persist_dir\\Tailscale-local\" -Force",
			"} else {",
			"    Remove-Item \"$env:LOCALAPPDATA\\Tailscale\" -Force -Recurse -ErrorAction SilentlyContinue",
			"}"
		]
	}
}